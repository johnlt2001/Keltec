{"version":3,"file":"useShopifyCookies.mjs","sources":["../../src/useShopifyCookies.tsx"],"sourcesContent":["import {useEffect} from 'react';\nimport {stringify} from 'worktop/cookie';\nimport {SHOPIFY_Y, SHOPIFY_S} from './cart-constants.js';\nimport {buildUUID, getShopifyCookies} from './cookies-utils.js';\n\nconst longTermLength = 60 * 60 * 24 * 360 * 1; // ~1 year expiry\nconst shortTermLength = 60 * 30; // 30 mins\n\n/**\n * Set user and session cookies and refresh the expiry time\n * @param hasUserConsent - Defaults to false. If hasUserConsent is true, we can set Shopify unique user\n * token cookie from expiry of 30 mins to 1 year\n * @param domain - The domain scope of the cookie\n * @example\n * ```tsx\n * import {useShopifyCookies} from '@shopify/hydrogen-react';\n *\n * useShopifyCookies(true, 'my-shop.com')\n * ```\n */\nexport function useShopifyCookies(hasUserConsent = false, domain = ''): void {\n  useEffect(() => {\n    const cookies = getShopifyCookies(document.cookie);\n\n    /**\n     * Set user and session cookies and refresh the expiry time\n     */\n    setCookie(\n      SHOPIFY_Y,\n      cookies[SHOPIFY_Y] || buildUUID(),\n      hasUserConsent ? longTermLength : shortTermLength,\n      domain\n    );\n    setCookie(\n      SHOPIFY_S,\n      cookies[SHOPIFY_S] || buildUUID(),\n      shortTermLength,\n      domain\n    );\n  });\n}\n\nfunction setCookie(\n  name: string,\n  value: string,\n  maxage: number,\n  domain: string\n): void {\n  document.cookie = stringify(name, value, {\n    maxage,\n    domain,\n    samesite: 'Lax',\n    path: '/',\n  });\n}\n"],"names":[],"mappings":";;;;AAKA,MAAM,iBAAiB,KAAK,KAAK,KAAK,MAAM;AAC5C,MAAM,kBAAkB,KAAK;AActB,SAAS,kBAAkB,iBAAiB,OAAO,SAAS,IAAU;AAC3E,YAAU,MAAM;AACR,UAAA,UAAU,kBAAkB,SAAS,MAAM;AAKjD;AAAA,MACE;AAAA,MACA,QAAQ,SAAS,KAAK,UAAU;AAAA,MAChC,iBAAiB,iBAAiB;AAAA,MAClC;AAAA,IAAA;AAEF;AAAA,MACE;AAAA,MACA,QAAQ,SAAS,KAAK,UAAU;AAAA,MAChC;AAAA,MACA;AAAA,IAAA;AAAA,EACF,CACD;AACH;AAEA,SAAS,UACP,MACA,OACA,QACA,QACM;AACG,WAAA,SAAS,UAAU,MAAM,OAAO;AAAA,IACvC;AAAA,IACA;AAAA,IACA,UAAU;AAAA,IACV,MAAM;AAAA,EAAA,CACP;AACH;"}